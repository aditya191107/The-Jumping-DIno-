<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dino Runner</title>

<style>
:root{
  --sky:#cceeff;
  --ground:#ddd;
  --text:#000;
}
body.night{
  --sky:#0b132b;
  --ground:#1c2541;
  --text:#fff;
}

body{
  margin:0;
  background:var(--sky);
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
  font-family:Arial, sans-serif;
  color:var(--text);
}

.game{
  width:720px;
  height:240px;
  border:2px solid #333;
  background:linear-gradient(var(--sky) 70%, var(--ground) 70%);
  position:relative;
  overflow:hidden;
}

/* START SCREEN */
.start{
  position:absolute;
  inset:0;
  background:rgba(0,0,0,0.6);
  color:#fff;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  z-index:10;
}
.start button{
  margin:6px;
  padding:10px 20px;
  cursor:pointer;
}

/* GROUND */
.ground{
  position:absolute;
  bottom:0;
  width:200%;
  height:20px;
  background:repeating-linear-gradient(
    90deg,#555 0 40px,#444 40px 80px
  );
  animation:groundMove 2s linear infinite;
}
@keyframes groundMove{
  from{left:0}
  to{left:-50%}
}

/* DINO */
.dino{
  position:absolute;
  left:60px;
  bottom:20px;
  width:40px;
  height:40px;
}
.body{
  width:30px;
  height:30px;
  background:#444;
  position:absolute;
  bottom:0;
}
.head{
  width:18px;
  height:18px;
  background:#444;
  position:absolute;
  left:22px;
}
.leg{
  width:6px;
  height:12px;
  background:#222;
  position:absolute;
  bottom:-10px;
  animation:run .3s infinite alternate;
}
.leg.left{left:6px}
.leg.right{left:16px;animation-delay:.15s}
@keyframes run{
  from{height:12px}
  to{height:6px}
}

/* OBSTACLES */
.obstacle{
  position:absolute;
  bottom:20px;
}
.cactus{
  width:20px;
  height:40px;
  background:green;
}
.bird{
  width:30px;
  height:20px;
  background:brown;
  bottom:90px;
}

/* UI */
.score{
  position:absolute;
  top:8px;
  right:12px;
}
</style>
</head>

<body>

<div class="game" id="game">

  <div class="start" id="start">
    <h2>ðŸ¦– Dino Runner</h2>
    <p>Made by <b>Aditya Tiwari</b></p>
    <button onclick="startGame()">Begin</button>
    <button onclick="toggleNight()">Night Mode</button>
  </div>

  <div class="dino" id="dino">
    <div class="body"></div>
    <div class="head"></div>
    <div class="leg left"></div>
    <div class="leg right"></div>
  </div>

  <div class="ground"></div>
  <div class="score" id="score">Score: 0</div>

</div>

<script>
const dino = document.getElementById("dino");
const game = document.getElementById("game");
const scoreText = document.getElementById("score");
const startScreen = document.getElementById("start");

/* GAME STATE */
let running = false;
let score = 0;
let speed = 4;

/* PHYSICS */
let y = 20;
let velocity = 0;
let xOffset = 0;

const gravity = 0.6;
const jumpForce = 12;
const forwardBoost = 2;

/* NIGHT MODE */
function toggleNight(){
  document.body.classList.toggle("night");
}

/* START GAME */
function startGame(){
  startScreen.style.display = "none";
  running = true;
}

/* JUMP */
function jump(){
  if(!running) return;
  if(y === 20){
    velocity = jumpForce;
    xOffset = 14; // forward push
  }
}

/* CONTROLS */
document.addEventListener("keydown",e=>{
  if(e.code==="Space") jump();
});
document.addEventListener("click",jump);
document.addEventListener("touchstart",e=>{
  e.preventDefault();
  jump();
},{passive:false});

/* MAIN LOOP */
function update(){
  if(!running){
    requestAnimationFrame(update);
    return;
  }

  /* vertical physics */
  velocity -= gravity;
  y += velocity;

  if(y < 20){
    y = 20;
    velocity = 0;
  }

  /* forward boost during jump */
  if(xOffset > 0){
    xOffset -= forwardBoost;
  }

  dino.style.bottom = y + "px";
  dino.style.left = (60 + (14 - xOffset)) + "px";

  if(y === 20){
    dino.style.left = "60px";
  }

  /* score & difficulty */
  score++;
  scoreText.textContent = "Score: " + score;

  if(score % 400 === 0){
    speed += 0.5;
  }

  requestAnimationFrame(update);
}
update();

/* OBSTACLES */
function spawnObstacle(){
  if(!running) return;

  const obs = document.createElement("div");
  obs.className = "obstacle " + (Math.random()>0.7?"bird":"cactus");
  let x = game.offsetWidth;
  obs.style.left = x + "px";
  game.appendChild(obs);

  const move = setInterval(()=>{
    if(!running){
      clearInterval(move);
      obs.remove();
      return;
    }

    x -= speed;
    obs.style.left = x + "px";

    const d = dino.getBoundingClientRect();
    const o = obs.getBoundingClientRect();

    if(
      d.left < o.right &&
      d.right > o.left &&
      d.bottom > o.top &&
      d.top < o.bottom
    ){
      running = false;
      startScreen.innerHTML =
        "<h2>Game Over</h2><button onclick='location.reload()'>Restart</button>";
      startScreen.style.display = "flex";
    }

    if(x < -50){
      obs.remove();
      clearInterval(move);
    }
  },20);
}

setInterval(spawnObstacle,1400);
</script>

</body>
</html>
